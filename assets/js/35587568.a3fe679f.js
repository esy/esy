"use strict";(self.webpackChunksite_v_3=self.webpackChunksite_v_3||[]).push([[8127],{2498:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var t=s(5893),i=s(1151);const r={id:"building-from-source",title:"Building from source"},d=void 0,o={id:"contributing/building-from-source",title:"Building from source",description:"To make changes to esy and test them locally:",source:"@site/../docs/contributing/building-from-source.md",sourceDirName:"contributing",slug:"/contributing/building-from-source",permalink:"/docs/contributing/building-from-source",draft:!1,unlisted:!1,editUrl:"https://github.com/esy/esy/tree/master/docs/../docs/contributing/building-from-source.md",tags:[],version:"current",lastUpdatedBy:"Manas Jayanth",lastUpdatedAt:1719322961,formattedLastUpdatedAt:"Jun 25, 2024",frontMatter:{id:"building-from-source",title:"Building from source"},sidebar:"docs",previous:{title:"How esy works",permalink:"/docs/contributing/how-it-works"},next:{title:"Repository Structure",permalink:"/docs/contributing/repository-structure"}},l={},c=[{value:"Updating <code>bin/esyInstallRelease.js</code>",id:"updating-binesyinstallreleasejs",level:3}];function a(e){const n={a:"a",code:"code",h3:"h3",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["To make changes to ",(0,t.jsx)(n.code,{children:"esy"})," and test them locally:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"% git clone  --recurse-submodules git://github.com/esy/esy.git\n% cd esy # Change to the cloned directory\n% esy # install and build dependencies \n% yarn # install NPM dependencies used during development.\n"})}),"\n",(0,t.jsxs)(n.p,{children:["And then, run newly built ",(0,t.jsx)(n.code,{children:"esy"})," executable from anywhere by adding ",(0,t.jsx)(n.code,{children:"PATH_TO_REPO/_build/install/default/bin"})," to the $PATH during the shell's session. On Windows, append ",(0,t.jsx)(n.code,{children:"PATH_TO_REPO/bin"})," instead, because it contains a smaller wrapper."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bat",children:'@ECHO off\n@SETLOCAL\n@SET ESY__ESY_BASH=%~dp0../node_modules/@prometheansacrifice/esy-bash\n"%~dp0../_build/install/default/bin/esy.exe" %*\n'})}),"\n",(0,t.jsxs)(n.p,{children:["On Windows, esy binary needs ",(0,t.jsx)(n.a,{href:"https://github.com/esy/esy-bash",children:(0,t.jsx)(n.code,{children:"esy-bash"})}),". ",(0,t.jsx)(n.code,{children:"esy"})," distributed on NPM finds it in the node_modules, but the dev binary finds it via the ",(0,t.jsx)(n.code,{children:"ESY__ESY_BASH"})," variable in the environment. This wrapper sets the value of the ",(0,t.jsx)(n.code,{children:"ESY__ESY_BASH"})," to a path in ",(0,t.jsx)(n.code,{children:"node_modules"})," where ",(0,t.jsx)(n.code,{children:"esy-bash"})," is installed by yarn."]}),"\n",(0,t.jsxs)(n.h3,{id:"updating-binesyinstallreleasejs",children:["Updating ",(0,t.jsx)(n.code,{children:"bin/esyInstallRelease.js"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"bin/esyInstallRelease.js"})," is developed separately within the ",(0,t.jsx)(n.code,{children:"esy-install-npm-release/"})," directory."]}),"\n",(0,t.jsx)(n.p,{children:"Run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"% make bin/esyInstallRelease.js\n"})}),"\n",(0,t.jsxs)(n.p,{children:["to update the ",(0,t.jsx)(n.code,{children:"bin/esyInstallRelease.js"})," file with the latest changed, don't\nforget to commit it."]})]})}function u(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>o,a:()=>d});var t=s(7294);const i={},r=t.createContext(i);function d(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);