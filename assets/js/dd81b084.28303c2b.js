"use strict";(self.webpackChunksite_v_3=self.webpackChunksite_v_3||[]).push([[8748],{9036:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var n=t(4848),o=t(8453);const r={id:"ocaml-compiler",title:"Using the OCaml compiler",authors:["prometheansacrifice"]},i=void 0,a={id:"ocaml-compiler",title:"Using the OCaml compiler",description:"Package",source:"@site/../docs/ocaml-compiler.md",sourceDirName:".",slug:"/ocaml-compiler",permalink:"/docs/ocaml-compiler",draft:!1,unlisted:!1,editUrl:"https://github.com/esy/esy/tree/master/docs/../docs/ocaml-compiler.md",tags:[],version:"current",lastUpdatedBy:"prometheansacrifice",lastUpdatedAt:1729151217,formattedLastUpdatedAt:"Oct 17, 2024",frontMatter:{id:"ocaml-compiler",title:"Using the OCaml compiler",authors:["prometheansacrifice"]},sidebar:"docs",previous:{title:"Linking Packages in Development",permalink:"/docs/linking-workflow"},next:{title:"Concepts",permalink:"/docs/concepts"}},c={},l=[{value:"Package",id:"package",level:2},{value:"Version",id:"version",level:2},{value:"Compiler variants",id:"compiler-variants",level:2}];function d(e){const s={a:"a",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h2,{id:"package",children:"Package"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"esy"})," installs the OCaml compiler packaged for NPM. While, as a user,\nthis shouldn't affect your workflow, here are the reasons why esy\ndoesn't use the compiler packages from Opam repository."]}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"When esy project was started, the compiler wasn't available on OPAM"}),"\n",(0,n.jsxs)(s.li,{children:["esy doesn't use the ",(0,n.jsx)(s.a,{href:"https://discuss.ocaml.org/t/experimental-new-layout-for-the-ocaml-variants-packages-in-opam-repository/6779",children:"compiler variants layout"})]}),"\n",(0,n.jsx)(s.li,{children:"Makes it easy to use the solver."}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"version",children:"Version"}),"\n",(0,n.jsxs)(s.p,{children:["Since the package is hosted on NPM, it's also necessary to use semver\nto specify the compiler version. ",(0,n.jsx)(s.em,{children:"We recommend that users specify only\nthe major version to easily get the patch and minor releases"})]}),"\n",(0,n.jsxs)(s.p,{children:["Example: ",(0,n.jsx)(s.code,{children:"4.x"}),", ",(0,n.jsx)(s.code,{children:"5.x"}),", ",(0,n.jsx)(s.code,{children:"5.1.x"})]}),"\n",(0,n.jsxs)(s.p,{children:["We advise against specifying the full version (eg: ",(0,n.jsx)(s.code,{children:"4.14.0"}),") as\npatches released by wont be seen by the solver."]}),"\n",(0,n.jsx)(s.h2,{id:"compiler-variants",children:"Compiler variants"}),"\n",(0,n.jsxs)(s.p,{children:["To install variants of the compiler like ",(0,n.jsx)(s.code,{children:"flambda"}),", ",(0,n.jsx)(s.code,{children:"musl-static"})," etc,\nspecify the semver tag."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-json",children:'{\n  "ocaml": "4.10.1002-musl.static.flambda",\n}\n'})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Note that the compiler doesn't need patches to work with esy"})})]})}function p(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>a});var n=t(6540);const o={},r=n.createContext(o);function i(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);