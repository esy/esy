"use strict";(self.webpackChunksite_v_3=self.webpackChunksite_v_3||[]).push([[9499],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=o.createContext({}),l=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return o.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=l(n),m=a,k=u["".concat(p,".").concat(m)]||u[m]||d[m]||r;return n?o.createElement(k,i(i({ref:t},c),{},{components:n})):o.createElement(k,i({ref:t},c))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[u]="string"==typeof e?e:a,i[1]=s;for(var l=2;l<r;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6003:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var o=n(7462),a=(n(7294),n(3905));const r={id:"using-repo-sources-workflow",title:"Using Unreleased Packages"},i=void 0,s={unversionedId:"using-repo-sources-workflow",id:"using-repo-sources-workflow",title:"Using Unreleased Packages",description:"esy allows to use unreleased versions of packages hosted in their development",source:"@site/../docs/using-dev-sources-workflow.md",sourceDirName:".",slug:"/using-repo-sources-workflow",permalink:"/docs/using-repo-sources-workflow",draft:!1,editUrl:"https://github.com/esy/esy/tree/master/docs/../docs/using-dev-sources-workflow.md",tags:[],version:"current",lastUpdatedBy:"Manas",lastUpdatedAt:1693535780,formattedLastUpdatedAt:"Sep 1, 2023",frontMatter:{id:"using-repo-sources-workflow",title:"Using Unreleased Packages"},sidebar:"docs",previous:{title:"Getting started",permalink:"/docs/getting-started"},next:{title:"Linking Packages in Development",permalink:"/docs/linking-workflow"}},p={},l=[{value:"With esy packages",id:"with-esy-packages",level:2},{value:"With opam packages",id:"with-opam-packages",level:2}],c={toc:l},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"esy allows to use unreleased versions of packages hosted in their development\nrepositories. This is useful as it allows to try new package versions before\nthey are released."),(0,a.kt)("h2",{id:"with-esy-packages"},"With esy packages"),(0,a.kt)("p",null,"To use an unreleased version of an esy package specify a dependency resolution\nin ",(0,a.kt)("a",{parentName:"p",href:"/docs/configuration#resolutions"},(0,a.kt)("inlineCode",{parentName:"a"},"resolutions"))," field alongside the dependency declaration:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'"dependencies": {\n  "reason": "*"\n},\n"resolutions": {\n  "reason": "facebook/reason#abcdef"\n}\n')),(0,a.kt)("p",null,"This will fetch ",(0,a.kt)("inlineCode",{parentName:"p"},"reason")," package sources from ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/facebook/reason"},"facebook/reason")," GitHub\nrepository."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Why ",(0,a.kt)("inlineCode",{parentName:"p"},"resolutions"),"?"),(0,a.kt)("p",{parentName:"blockquote"},"This is because in case any other package in the project's sandbox depends on\n",(0,a.kt)("inlineCode",{parentName:"p"},"reason")," package then it will probably conflict with ",(0,a.kt)("inlineCode",{parentName:"p"},"facebook/reason"),"\ndeclaration (it's most likely others will depend on an already released\nversion of reason instead)."),(0,a.kt)("p",{parentName:"blockquote"},"Thus we use ",(0,a.kt)("inlineCode",{parentName:"p"},"resolutions")," so that constraint solver is forced to use\n",(0,a.kt)("inlineCode",{parentName:"p"},"facebook/reason")," declaration in every place ",(0,a.kt)("inlineCode",{parentName:"p"},"reason")," package is required.")),(0,a.kt)("p",null,"Other options are:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"user/repo#<commit>")," will fetch sources from a GitHub's user/repo repository."),(0,a.kt)("p",{parentName:"li"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"<commit>")," is mandatory and should point to a specific commit (this will\nbe lifted in the future)."),(0,a.kt)("p",{parentName:"li"},"Examples:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"facebook/reason#7ada18f")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"git://example.com/repo.git#<commit>")," will fetch sources from a specified git\nrepository."))),(0,a.kt)("h2",{id:"with-opam-packages"},"With opam packages"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"This corresponds to opam's ",(0,a.kt)("inlineCode",{parentName:"p"},"opam pin")," workflow.")),(0,a.kt)("p",null,"The same workflow is supported for opam packages."),(0,a.kt)("p",null,"One can use an unreleased opam package by specifying its development\nrepository. The only difference is that one should also specify an opam package\nname."),(0,a.kt)("p",null,"Example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'"dependencies": {\n  "@opam/lwt": "*",\n  "@opam/lwt_ppx": "*"\n},\n"resolutions": {\n  "@opam/lwt": "ocsigen/lwt:lwt.opam#abc342",\n}\n')),(0,a.kt)("p",null,"Here we fetch ",(0,a.kt)("inlineCode",{parentName:"p"},"@opam/lwt")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"@opam/lwt_ppx")," packages from the single\n",(0,a.kt)("inlineCode",{parentName:"p"},"ocsigen/lwt")," GitHub repository but refer to different opam manifests ",(0,a.kt)("inlineCode",{parentName:"p"},"lwt.opam"),"\nand ",(0,a.kt)("inlineCode",{parentName:"p"},"lwt_ppx.opam")," to use corresponding packages."))}d.isMDXComponent=!0}}]);