"use strict";(self.webpackChunksite_v_3=self.webpackChunksite_v_3||[]).push([[3491],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>k});var a=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),d=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=d(e.components);return a.createElement(s.Provider,{value:n},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),u=d(t),m=i,k=u["".concat(s,".").concat(m)]||u[m]||c[m]||o;return t?a.createElement(k,l(l({ref:n},p),{},{components:t})):a.createElement(k,l({ref:n},p))}));function k(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,l=new Array(o);l[0]=m;var r={};for(var s in n)hasOwnProperty.call(n,s)&&(r[s]=n[s]);r.originalType=e,r[u]="string"==typeof e?e:i,l[1]=r;for(var d=2;d<o;d++)l[d]=t[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},6547:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var a=t(7462),i=(t(7294),t(3905));const o={id:"configuration",title:"Project Configuration"},l=void 0,r={unversionedId:"configuration",id:"configuration",title:"Project Configuration",description:"package.json",source:"@site/../docs/configuration.md",sourceDirName:".",slug:"/configuration",permalink:"/docs/configuration",draft:!1,editUrl:"https://github.com/esy/esy/tree/master/docs/../docs/configuration.md",tags:[],version:"current",lastUpdatedBy:"ducdetronquito",lastUpdatedAt:1696763773,formattedLastUpdatedAt:"Oct 8, 2023",frontMatter:{id:"configuration",title:"Project Configuration"},sidebar:"docs",previous:{title:"Concepts",permalink:"/docs/concepts"},next:{title:"Environment",permalink:"/docs/environment"}},s={},d=[{value:"package.json",id:"packagejson",level:2},{value:"Specify Build &amp; Install Commands",id:"specify-build--install-commands",level:2},{value:"<code>esy.build</code>",id:"esybuild",level:3},{value:"<code>esy.buildDev</code>",id:"esybuilddev",level:3},{value:"<code>esy.install</code> (optional)",id:"esyinstall-optional",level:3},{value:"Enforcing Out Of Source Builds",id:"enforcing-out-of-source-builds",level:2},{value:"<code>esy.buildsInSource</code>",id:"esybuildsinsource",level:3},{value:"Exported Environment",id:"exported-environment",level:2},{value:"<code>esy.exportedEnv</code>",id:"esyexportedenv",level:3},{value:"Build Environment",id:"build-environment",level:2},{value:"<code>esy.buildEnv</code>",id:"esybuildenv",level:3},{value:"Example: dune (jbuilder)",id:"example-dune-jbuilder",level:2},{value:"Specify dependencies",id:"specify-dependencies",level:2},{value:"<code>dependencies</code>",id:"dependencies",level:3},{value:"<code>devDependencies</code>",id:"devdependencies",level:3},{value:"<code>resolutions</code>",id:"resolutions",level:3},{value:"Project Specific Commands",id:"project-specific-commands",level:2},{value:"<code>scripts</code>",id:"scripts",level:3}],p={toc:d},u="wrapper";function c(e){let{components:n,...t}=e;return(0,i.kt)(u,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"packagejson"},"package.json"),(0,i.kt)("p",null,"esy knows how to build your package and its dependencies by looking at the\n",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," file at the root of the project."),(0,i.kt)("p",null,"Because esy needs more information about the project, it extends ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json"),"\nwith the following fields:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#esybuild"},(0,i.kt)("inlineCode",{parentName:"a"},"esy.build"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#esybuilddev"},(0,i.kt)("inlineCode",{parentName:"a"},"esy.buildDev"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#esyinstall"},(0,i.kt)("inlineCode",{parentName:"a"},"esy.install"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#esybuildsinsource"},(0,i.kt)("inlineCode",{parentName:"a"},"esy.buildsInSource"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#esyexportedenv"},(0,i.kt)("inlineCode",{parentName:"a"},"esy.exportedEnv"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#esybuildenv"},(0,i.kt)("inlineCode",{parentName:"a"},"esy.buildEnv"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#resolutions"},(0,i.kt)("inlineCode",{parentName:"a"},"resolutions"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#scripts"},(0,i.kt)("inlineCode",{parentName:"a"},"scripts")))),(0,i.kt)("h2",{id:"specify-build--install-commands"},"Specify Build & Install Commands"),(0,i.kt)("p",null,"The crucial pieces of configuration are ",(0,i.kt)("inlineCode",{parentName:"p"},"esy.build")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"esy.install")," keys, they\nspecify how to build and install built artifacts."),(0,i.kt)("h3",{id:"esybuild"},(0,i.kt)("inlineCode",{parentName:"h3"},"esy.build")),(0,i.kt)("p",null,"Describe how your package's default targets should be built when package is\nbeing used as a dependency."),(0,i.kt)("p",null,"For example, for a ",(0,i.kt)("a",{parentName:"p",href:"https://dune.readthedocs.io/"},"dune")," based package you'd want to call ",(0,i.kt)("inlineCode",{parentName:"p"},"dune build"),"\ncommand."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "esy": {\n    "build": [\n      "dune build -p #{self.name}",\n    ]\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/docs/environment#variable-substitution-syntax"},"esy variable substitution syntax")," can be used to\ndeclare build commands."),(0,i.kt)("h3",{id:"esybuilddev"},(0,i.kt)("inlineCode",{parentName:"h3"},"esy.buildDev")),(0,i.kt)("p",null,"Describe how your package's default targets should be built when package is\nbeing developed. This is only used for the root package of an esy project."),(0,i.kt)("p",null,"The main difference with ",(0,i.kt)("inlineCode",{parentName:"p"},"esy.build")," is that commands declared in ",(0,i.kt)("inlineCode",{parentName:"p"},"esy.buildDev"),"\nhave access to ",(0,i.kt)("inlineCode",{parentName:"p"},'"devDependencies"'),"."),(0,i.kt)("p",null,"For example, for a ",(0,i.kt)("a",{parentName:"p",href:"https://dune.readthedocs.io/"},"dune")," based package you'd want\nto call ",(0,i.kt)("inlineCode",{parentName:"p"},"dune build")," command."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "esy": {\n    "buildDev": [\n      "refmterr dune build --root . --only-packages #{self.name}",\n    ]\n  },\n  "devDependencies": {\n    "refmterr": "*",\n    ...\n  }\n}\n')),(0,i.kt)("p",null,"Note that we use ",(0,i.kt)("inlineCode",{parentName:"p"},"refmterr")," command which is declared in ",(0,i.kt)("inlineCode",{parentName:"p"},'"devDependencies"'),"\nsection."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/docs/environment#variable-substitution-syntax"},"esy variable substitution syntax"),"\ncan be used to declare build commands."),(0,i.kt)("p",null,"If no ",(0,i.kt)("inlineCode",{parentName:"p"},"esy.buildDev")," is defined then ",(0,i.kt)("inlineCode",{parentName:"p"},"esy.build")," is used instead."),(0,i.kt)("h3",{id:"esyinstall-optional"},(0,i.kt)("inlineCode",{parentName:"h3"},"esy.install")," (optional)"),(0,i.kt)("p",null,"By default ",(0,i.kt)("inlineCode",{parentName:"p"},"esy")," will look for a single ",(0,i.kt)("inlineCode",{parentName:"p"},"*.install")," file in the project root and\nwill transfer all files mentioned there into ",(0,i.kt)("inlineCode",{parentName:"p"},"#{self.install}")," directory."),(0,i.kt)("p",null,"This follows the convention of opam and plays well with ",(0,i.kt)("inlineCode",{parentName:"p"},"dune")," (which produces\n",(0,i.kt)("inlineCode",{parentName:"p"},"*.install")," files by default)."),(0,i.kt)("p",null,"But some projects can have special requirements:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Some have multiple ",(0,i.kt)("inlineCode",{parentName:"p"},"*.install")," files and want to install artifacts only from\nsome of them.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Some might require custom commands to be executed (for example ",(0,i.kt)("inlineCode",{parentName:"p"},"make install"),")."))),(0,i.kt)("p",null,"There's ",(0,i.kt)("inlineCode",{parentName:"p"},"esy.install")," config key which allows to specify a set of commands which\nshould move built artifacts to ",(0,i.kt)("inlineCode",{parentName:"p"},"#{self.install}")," location."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "esy": {\n    "build": [...],\n    "install": [\n      "dune install --prefix=#{self.install}"\n    ]\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/docs/environment#variable-substitution-syntax"},"esy variable substitution syntax")," can be used to\ndeclare install commands."),(0,i.kt)("h2",{id:"enforcing-out-of-source-builds"},"Enforcing Out Of Source Builds"),(0,i.kt)("p",null,'esy requires packages to be built "out of source".'),(0,i.kt)("p",null,"It allows esy to separate source code from built artifacts and thus reuse the\nsame source code location between several sandboxes."),(0,i.kt)("h3",{id:"esybuildsinsource"},(0,i.kt)("inlineCode",{parentName:"h3"},"esy.buildsInSource")),(0,i.kt)("p",null,'Because not every project\'s build system is designed in a way which allows "out\nof source" builds esy has special settings ',(0,i.kt)("inlineCode",{parentName:"p"},"esy.buildsInSource")," which provide\na useful workaround."),(0,i.kt)("p",null,"There are three modes which are controlled by ",(0,i.kt)("inlineCode",{parentName:"p"},"esy.buildsInSource")," config key:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "esy": {\n    "build": [...],\n    "install": [...],\n    "buildsInSource": "_build" | false | true,\n  }\n}\n')),(0,i.kt)("p",null,"Each mode changes how esy executes ",(0,i.kt)("a",{parentName:"p",href:"#esybuild"},"build commands"),". This is how\nthose modes work:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},'"_build"')),(0,i.kt)("p",{parentName:"li"},"Build commands can place artifacts inside the ",(0,i.kt)("inlineCode",{parentName:"p"},"_build")," directory of the\nproject's root (",(0,i.kt)("inlineCode",{parentName:"p"},"$cur__root/_build")," in terms of esy ",(0,i.kt)("a",{parentName:"p",href:"/docs/environment#build-environment"},"build\nenvironment"),")."),(0,i.kt)("p",{parentName:"li"},"This is what ",(0,i.kt)("a",{parentName:"p",href:"https://dune.readthedocs.io/"},"dune")," or ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ocaml/ocamlbuild/blob/master/manual/manual.adoc"},"ocamlbuild")," (in its default configuration)\nusers should be using as this matches those build systems' conventions.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"false")," (default if key is omitted)"),(0,i.kt)("p",{parentName:"li"},"Build commands should use ",(0,i.kt)("inlineCode",{parentName:"p"},"$cur__target_dir")," as the build directory.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"true")),(0,i.kt)("p",{parentName:"li"},"Projects are allowed to place build artifacts anywhere in their source tree, but not outside of their source tree. Otherwise, esy will defensively copy project's root into ",(0,i.kt)("inlineCode",{parentName:"p"},"$cur__target_dir")," and run build commands from there."),(0,i.kt)("p",{parentName:"li"},"This is the mode which should be used as the last resort as it degrades\nperformance of the builds greatly by placing correctness as a priority."))),(0,i.kt)("h2",{id:"exported-environment"},"Exported Environment"),(0,i.kt)("p",null,"Packages can configure how they contribute to the environment of the packages\nwhich depend on them."),(0,i.kt)("h3",{id:"esyexportedenv"},(0,i.kt)("inlineCode",{parentName:"h3"},"esy.exportedEnv")),(0,i.kt)("p",null,"To add a new environment variable to the esy ",(0,i.kt)("a",{parentName:"p",href:"#build-environment"},"build\nenvironment")," packages could specify ",(0,i.kt)("inlineCode",{parentName:"p"},"esy.exportedEnv")," config\nkey:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "name": "mylib",\n  "esy": {\n    ...,\n    "exportedEnv": {\n      "CAML_LD_LIBRARY_PATH": {\n        "val": "#{mylib.lib : $CAML_LD_LIBRARY_PATH}",\n        "scope": "global"\n      }\n    }\n  }\n}\n')),(0,i.kt)("p",null,"In the example above, the configuration ",(0,i.kt)("em",{parentName:"p"},"exports")," (in this specific case it\n",(0,i.kt)("em",{parentName:"p"},"re-exports")," it) an environment variable called ",(0,i.kt)("inlineCode",{parentName:"p"},"$CAML_LD_LIBRARY_PATH")," by\nappending ",(0,i.kt)("inlineCode",{parentName:"p"},"$mylib__lib")," to its previous value."),(0,i.kt)("p",null,"Note the usage of ",(0,i.kt)("a",{parentName:"p",href:"#variable-substitution-syntax"},"esy variable substitution\nsyntax")," to define the value of the\n",(0,i.kt)("inlineCode",{parentName:"p"},"$CAML_LD_LIBRARY_PATH")," variable."),(0,i.kt)("h2",{id:"build-environment"},"Build Environment"),(0,i.kt)("p",null,"Packages can configure their own build environment."),(0,i.kt)("p",null,"Note that build environment doesn't propagate to dependencies, only current\npackage's build process can access it."),(0,i.kt)("h3",{id:"esybuildenv"},(0,i.kt)("inlineCode",{parentName:"h3"},"esy.buildEnv")),(0,i.kt)("p",null,"To add a new environment variable to the build environment of the current\npackage there's ",(0,i.kt)("inlineCode",{parentName:"p"},"esy.buildEnv")," config key:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "name": "mylib",\n  "esy": {\n    ...,\n    "buildEnv": {\n      "DUNE_BUILD_DIR": "#{self.target_dir}"\n    }\n  }\n}\n')),(0,i.kt)("p",null,"Note the usage of ",(0,i.kt)("a",{parentName:"p",href:"#variable-substitution-syntax"},"esy variable substitution\nsyntax")," to define the value of the\n",(0,i.kt)("inlineCode",{parentName:"p"},"$DUNE_BUILD_DIR")," variable."),(0,i.kt)("h2",{id:"example-dune-jbuilder"},"Example: dune (jbuilder)"),(0,i.kt)("p",null,"This is how it looks for a ",(0,i.kt)("a",{parentName:"p",href:"https://dune.readthedocs.io/"},"dune")," (formely\njbuilder) based project:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "my-dune-project",\n  "version": "1.0.0",\n\n  "esy": {\n    "build": ["dune build"],\n    "buildEnv": {"DUNE_BUILD_DIR": "#{self.target_dir}"}\n  },\n\n  "dependencies": {\n    "@opam/dune": "*",\n    "ocaml": "*"\n  }\n}\n')),(0,i.kt)("h2",{id:"specify-dependencies"},"Specify dependencies"),(0,i.kt)("h3",{id:"dependencies"},(0,i.kt)("inlineCode",{parentName:"h3"},"dependencies")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"This works similar to npm or yarn standard ",(0,i.kt)("inlineCode",{parentName:"p"},"dependencies")," configuration.")),(0,i.kt)("p",null,"To define a set of dependencies of the package specify them in ",(0,i.kt)("inlineCode",{parentName:"p"},"dependencies"),"\nkey inside ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'"dependencies": {\n  "refmterr": "^3.1.7",\n  "@esy-ocaml/reason": "^3.0.0"\n}\n')),(0,i.kt)("p",null,"We refer to the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/files/package.json#dependencies"},"npm documentation on ",(0,i.kt)("inlineCode",{parentName:"a"},"dependencies"))," for the\nsyntax of possible package constraints."),(0,i.kt)("p",null,"As esy allows to work with packages hosted on opam repository it extends npm's\nstandard mechanism with a special handling of ",(0,i.kt)("inlineCode",{parentName:"p"},"@opam/*")," scope:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Any scoped package ",(0,i.kt)("inlineCode",{parentName:"p"},"@opam/PKG")," refers to an opam packsage ",(0,i.kt)("inlineCode",{parentName:"p"},"PKG"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Any constraint for a scoped package ",(0,i.kt)("inlineCode",{parentName:"p"},"@opam/PKG")," is a constraint against opam\nversions."))),(0,i.kt)("h3",{id:"devdependencies"},(0,i.kt)("inlineCode",{parentName:"h3"},"devDependencies")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"This works similar to npm or yarn standard ",(0,i.kt)("inlineCode",{parentName:"p"},"devDependencies")," configuration.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"devDependencies")," works similar to ",(0,i.kt)("inlineCode",{parentName:"p"},"dependencies")," but they are only handled for\nthe root package and override the constraints found in ",(0,i.kt)("inlineCode",{parentName:"p"},"dependencies")," key."),(0,i.kt)("h3",{id:"resolutions"},(0,i.kt)("inlineCode",{parentName:"h3"},"resolutions")),(0,i.kt)("p",null,"It's sometimes necessary to override the package version determined by the\nsolver. In such a case, use ",(0,i.kt)("inlineCode",{parentName:"p"},"resolutions")," field in the ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'"resolutions": {\n  "@opam/menhir": "20171013"\n}\n')),(0,i.kt)("p",null,"Resolutions are only valid in the current project and are not exported."),(0,i.kt)("p",null,"This feature works similar to yarn's ",(0,i.kt)("a",{parentName:"p",href:"https://yarnpkg.com/lang/en/docs/selective-version-resolutions/"},"Selective dependency resolutions"),"\nbut nested patterns (which contain ",(0,i.kt)("inlineCode",{parentName:"p"},"**")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"*")," are not supported)."),(0,i.kt)("h2",{id:"project-specific-commands"},"Project Specific Commands"),(0,i.kt)("h3",{id:"scripts"},(0,i.kt)("inlineCode",{parentName:"h3"},"scripts")),(0,i.kt)("p",null,"Similar to npm and yarn, esy supports custom project specific commands via\n",(0,i.kt)("inlineCode",{parentName:"p"},"scripts")," section inside ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'"scripts": {\n  "build-dev": "esy build dune build --dev",\n  "test": "dune runtest",\n}\n')),(0,i.kt)("p",null,"The example above defines two new commands."),(0,i.kt)("p",null,"The command ",(0,i.kt)("inlineCode",{parentName:"p"},"esy build-dev")," is configured to be a shortcut for the following\ninvocation:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"esy build dune build\n")),(0,i.kt)("p",null,"While the command ",(0,i.kt)("inlineCode",{parentName:"p"},"esy test")," is defined to be a shortcut for:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"esy dune runtest\n")),(0,i.kt)("p",null,"For non-interactive (ie. when used in scripts), to ensure forward compatiblity, we encourage a more verbose\n",(0,i.kt)("inlineCode",{parentName:"p"},"esy run-script build-dev")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"esy run-script test"),". Explicitly specifying\n",(0,i.kt)("inlineCode",{parentName:"p"},"run-script")," prevents clashes with subcommands that we add in future."),(0,i.kt)("p",null,"Note that if a command in ",(0,i.kt)("inlineCode",{parentName:"p"},"scripts")," is not prefixed with the ",(0,i.kt)("inlineCode",{parentName:"p"},"esy")," command then it's made to automatically execute inside the ",(0,i.kt)("a",{parentName:"p",href:"/docs/environment#Command-Environment"},"Command Environment"),"."))}c.isMDXComponent=!0}}]);